const mm2inch=t=>t/25.4,mm2px=(t,i=96)=>Math.round(mm2inch(t)*i),width=mm2px(76,203),height=mm2px(30,203),boardEl=document.querySelector("#mainBorad"),canvas=new fabric.Canvas(boardEl,{width,height,backgroundColor:"#fff"});fabric.CustomLine=fabric.util.createClass(fabric.Line,{type:"CustomLine",_fixedPadding:mm2px(1.34),initialize:function(t,i){i||(i={}),this.callSuper("initialize",t,i)},_setWidthHeight:function(t){t||(t={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1)+2*this._fixedPadding,this.left="left"in t?t.left:this._getLeftToOriginX(),this.top="top"in t?t.top:this._getTopToOriginY()},_render:function(t){t.beginPath();let i=this.calcLinePoints();t.moveTo(i.x1,i.y1+this._fixedPadding),t.lineTo(i.x2,i.y2-this._fixedPadding),t.lineWidth=this.strokeWidth;var e=t.strokeStyle;t.strokeStyle=this.stroke||t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=e},_getNonTransformedDimensions:function(){let t=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(t.y-=this.strokeWidth),t.x-=this.strokeWidth),t}});const line=new fabric.CustomLine([0,0,200,0],{stroke:"black",strokeWidth:mm2px(1.34),selectable:!0});let heightEl,setHeightBtn;canvas.add(line),line.on("scaling",(function(){const t=this.scaleY;this.set({strokeWidth:this.strokeWidth*t,width:this.width*this.scaleX,scaleX:1,scaleY:1}),canvas.renderAll()})),line.on("selected",(function(){strokeWidthEl.value=this.strokeWidth}));const init=()=>{strokeWidthEl=document.querySelector(".strokeWidth"),setStrokeWidthBtn=document.querySelector(".setStrokeWidthBtn"),setStrokeWidthBtn.addEventListener("click",(()=>{strokeWidthEl.value>0&&(line.set("strokeWidth",+strokeWidthEl.value),canvas.requestRenderAll())}))};init();