let board;const PPI=96;function inch2px(e){return 96*e}function px2inch(e){return e/96}function setPrint(){const e=()=>{document.body.removeChild(this)};this.contentWindow.onbeforeunload=e,this.contentWindow.onafterprint=e;const t=document.querySelector("#width"),n=document.querySelector("#height"),i=[];i.push(board.toSVG()),this.contentWindow.postMessage({width:t.value,height:n.value,items:i})}const print=()=>{const e=document.createElement("iframe");e.onload=setPrint,e.style.display="none",e.src="./print-temp.html",document.body.appendChild(e)},initFabric=()=>{board=new fabric.Canvas("board",{width:2*inch2px(3),height:2*inch2px(1.25)});const e=new fabric.IText("中文 USB",{left:0,top:0,splitByGrapheme:!1,fontFamily:"微软雅黑"});board.add(e),e.viewportCenterH(),e.viewportCenterV(),board.renderAll()},init=()=>{initFabric(),window.addEventListener("afterprint",(()=>self.close));const e=document.querySelector("#print"),t=document.querySelector("#width"),n=document.querySelector("#height"),i=()=>{const e=t.value,i=n.value;board.setDimensions({width:2*inch2px(e),height:2*inch2px(i)})};t.addEventListener("change",i),n.addEventListener("change",i),e.addEventListener("click",print)};init();